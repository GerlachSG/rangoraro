<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RangoRaro</title>
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/icon/logo-aba.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/rifa.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/recentes.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-functions-compat.js"></script>
    <script src="../js/firebase-auth.js"></script>
    <script src="../js/lib/canvas-confetti.min.js"></script>
    <script src="../js/carrinho.js"></script>
    <script src="../js/recentes.js"></script>
    <script src="../js/deposito.js"></script>
    <script src="../js/rifa.js"></script>
    <script src="../js/suporte-widget.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a href="index.html" class="logo">
            <img src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/icon/logo.svg" alt="Logo RangoRaro">
            <span>RangoRaro</span>
        </a>
        
        <nav class="nav-center">
            <a href="pacotes.html" class="nav-item">
                <img src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/icon/pacote.svg" alt="Ícone Pacotes">
                <span>Pacotes</span>
            </a>
            <a href="trocas.html" class="nav-item">
                <img src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/icon/trocas.svg" alt="Ícone Trocas">
                <span>Trocas</span>
            </a>
            <a href="rifa.html" class="nav-item">
                <img src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/icon/eventos.svg" alt="Ícone Eventos">
                <span>Eventos</span>
            </a>
            <a href="premios.html" class="nav-item">
                <img src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/icon/premios.svg" alt="Ícone Prêmios">
                <span>Prêmios</span>
            </a>
        </nav>
        
        <div class="header-buttons">
            <button class="btn-outline">Login</button>
            <button class="btn-primary">Registrar</button>
        </div>

        <div class="header-right" style="display: none;">
            <button class="cart">Carrinho</button>
            <div class="balance">R$ 0,00</div>
            <div class="profile-pic"></div>
        </div>
    </header>

    <!-- MODAL DE AUTENTICAÇÃO -->
    <div class="auth-modal-overlay">
        <div class="auth-modal">
            <h2>Bem-vindo ao RangoRaro</h2>
            <p>Entre para Acessar Sua Conta</p>
            <button onclick="handleGoogleLogin()">
                <img src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/icon/google.svg" alt="Google">
                Entrar com <b>Google</b>
            </button>
            <div class="age-check-container">
                <input type="checkbox" id="age-check">
                <label for="age-check">Ao acessar o site eu declaro que tenho pelo menos 18 anos.</label>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- Conteúdo Principal -->
        <main class="main-content">
            <div class="rifa-information">
                <div class="ticket esquerda">
                    <img src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/rifa/ticket-esquerda.svg">
                </div>

                <div class="ticket-main">

                    <div class="ticket-main-content">
                        <div class="information">
                            <div class="rifa-title"><hr><h1>Rifa Diária #1 R$5.000,00</h1><hr></div>
                        </div>

                        <div class="timer">
                            <p class="timer-paragraph">Rifa termina em <span> 00H 51M 10S</span></p>
                        </div>
                    </div>
                </div>


                <div class="ticket direita">
                    <img src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/rifa/ticket-direita.svg">
                </div>
            </div>

            <div class="user-tickets-section">
                <div class="user-info">
                    <img id="user-avatar" src="https://cdn.jsdelivr.net/gh/eduardoamjunior/cdn-rangoraro@main/icon/profile-pic.svg" alt="Avatar do usuário">
                    <span id="user-display-name">Faça login</span>
                </div>
                <div class="tickets-info">
                    <span>Bilhetes</span>
                    <strong id="user-ticket-count">0</strong>
                </div>
            </div>

            <div class="rifa-about">
                <div class="about-text">
                    <div class="about-title">
                        <p>Sobre a Rifa Diária</p>
                    </div>
                    <div class="about-sub-title">
                        <p>Gaste R$1 ou mais para a chance de ganhar até R$3.000,00 todo dia, dez <br>sortudos ganhadores são aleatoriamente selecionado. Se você ganhar apenas <br>clique para coletar seu prêmio. Abra um pacote e veja se hoje é seu dia de sorte.</p>
                    </div>
                </div>

                <div class="card-container">
                    <div class="about-card diariamente">
                        <p>Abra pacotes diáriamente <br> para uma chance de ganhar</p>
                    </div>

                    <div class="about-card tempo">
                        <p>Tempo está acabando<br>Não perca sua chance!</p>
                    </div>
                </div>
            </div>

            <div class="rifa-history">
                <table class="tb-rifa">
                    <thead>
                        <tr>
                        <th class="tb hash">#</th>
                        <th class="tb ganhadores">Rifa #0 Ganhadores</th>
                        <th class="tb tickets">Tickets</th>
                        <th class="tb premio">Prêmio</th> 
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                <td class="tb hash">1</td>
                <td class="tb ganhadores">ana******sil</td>
                <td class="tb tickets">18234</td>
                <td class="tb premio">R$3.000,00</td>
            </tr>
            <tr>
                <td class="tb hash">2</td>
                <td class="tb ganhadores">luc******sou</td>
                <td class="tb tickets">11</td>
                <td class="tb premio">R$1.000,00</td>
            </tr>
            <tr>
                <td class="tb hash">3</td>
                <td class="tb ganhadores">mar******cos</td>
                <td class="tb tickets">3290</td>
                <td class="tb premio">R$500,00</td>
            </tr>
            <tr>
                <td class="tb hash">4</td>
                <td class="tb ganhadores">ped******oli</td>
                <td class="tb tickets">7652</td>
                <td class="tb premio">R$250,00</td>
            </tr>
            <tr>
                <td class="tb hash">5</td>
                <td class="tb ganhadores">gab******san</td>
                <td class="tb tickets">12345</td>
                <td class="tb premio">R$150,00</td>
            </tr>
            <tr>
                <td class="tb hash">6</td>
                <td class="tb ganhadores">fer******lim</td>
                <td class="tb tickets">123</td>
                <td class="tb premio">R$50,00</td>
            </tr>
            <tr>
                <td class="tb hash">7</td>
                <td class="tb ganhadores">bru******alv</td>
                <td class="tb tickets">140</td>
                <td class="tb premio">R$30,00</td>
            </tr>
            <tr>
                <td class="tb hash">8</td>
                <td class="tb ganhadores">raf******eir</td>
                <td class="tb tickets">4</td>
                <td class="tb premio">R$20,00</td>
            </tr>
                    </tbody>
                </table>
            </div>
        </main>

    <!-- Recentes -->
        <aside class="recentes">
            <!-- Rangos recentes devem aparecer aqui -->
        </aside>
    
</body>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
        // Seleciona o elemento <span> onde o tempo será exibido
        const timerElement = document.querySelector('.timer-paragraph span');

        // Se o elemento não for encontrado, interrompe o script para evitar erros
        if (!timerElement) {
            console.error("Elemento do timer não encontrado!");
            return;
        }

        function updateCountdown() {
            // Pega a data e hora atuais
            const now = new Date();

            // Define a data e hora do final da rifa (meia-noite do dia seguinte)
            const tomorrow = new Date();
            tomorrow.setDate(now.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0); // Define para 00:00:00 do próximo dia

            // Calcula a diferença em milissegundos
            const timeLeft = tomorrow.getTime() - now.getTime();

            // Se o tempo já acabou (pouco provável com essa lógica, mas é uma boa prática)
            if (timeLeft < 0) {
                timerElement.textContent = " 00H 00M 00S";
                return;
            }

            // Converte a diferença para horas, minutos e segundos
            const hours = Math.floor((timeLeft / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((timeLeft / 1000 / 60) % 60);
            const seconds = Math.floor((timeLeft / 1000) % 60);

            // Formata os números para sempre terem dois dígitos (ex: 09, 08, 07)
            const formattedHours = String(hours).padStart(2, '0');
            const formattedMinutes = String(minutes).padStart(2, '0');
            const formattedSeconds = String(seconds).padStart(2, '0');

            // Atualiza o texto no HTML
            timerElement.textContent = ` ${formattedHours}H ${formattedMinutes}M ${formattedSeconds}S`;
        }

        // Chama a função uma vez imediatamente para não haver atraso na exibição
        updateCountdown();

        // Configura um intervalo para atualizar o contador a cada segundo (1000 milissegundos)
        setInterval(updateCountdown, 1000);
    });

    </script>
</html>
